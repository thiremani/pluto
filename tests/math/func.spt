arr = [1 2 3 5]

# Basic Square specializations
intVal = Square(5)
floatVal = Square(2.2)
arrVal = Square(arr)

"SquareInt: -intVal"
"SquareFloat: -floatVal"
"SquareArr: -arrVal\n"

# Range and filter (non-accumulated)
rangeVal = Square(1:3)
arrRangeVal = Square(arr[1:3])
arrFilterVal = Square(arr > 3)
arrRangeFilterVal = Square(arr[1:3] > 3)
arrRangeFilterKeepPrev = 99
arrRangeFilterKeepPrev = Square(arr[1:3] > 3)
callOOBKeepPrev = 11
callOOBKeepPrev = 2 > 1 Square(arr[10])
rangeFilterTailFalseVal = Square((0:5) < 3)

"SquareRange: -rangeVal"
"SquareArrRange: -arrRangeVal"
"SquareArrFilter: -arrFilterVal"
"SquareArrRangeFilter: -arrRangeFilterVal"
"SquareArrRangeFilterKeepPrev: -arrRangeFilterKeepPrev"
"SquareCallOOBKeepPrev: -callOOBKeepPrev"

arrRangeFilterKeepPrev = Square(arr[1:3] > 2)
"SquareArrRangeFilterKeepPrev changed: -arrRangeFilterKeepPrev"

"SquareRangeFilterTailFalse: -rangeFilterTailFalseVal\n"

# Range and array-range accumulation
rangeAccVal = [Square(1:3)]
arrRangeAccVal = [Square(arr[1:3])]
arrRangeFilterAccFalseVal = [Square(arr[1:3] > 3)]
arrRangeFilterAccMixedVal = [Square(arr[1:4] > 2)]
rangeFilterAccVal = [Square((0:5) > 3)]
arrInput = [1 2 3]
arrAssignNoMatch = [Square(arrInput[1:4] > 20)]
arrSelf = [1 2 3]
arrSelf = 1 > 2 [Square(arrSelf[1:4])]

arrSelfMixed = [1 2 3]
arrSelfMixed = [Square(arrSelfMixed[1:4] > 1)]

"SquareRangeAcc: -rangeAccVal"
"SquareArrRangeAcc: -arrRangeAccVal"
"SquareArrRangeFilterAccFalse: -arrRangeFilterAccFalseVal"
"SquareArrRangeFilterAccMixed: -arrRangeFilterAccMixedVal"
"SquareRangeFilterAcc: -rangeFilterAccVal"
"SquareArrAssignNoMatch: -arrAssignNoMatch"
"SquareArrSelfCondFail: -arrSelf"

arrSelf = [Square(arrSelf[1:4] > 20)]
"SquareArrSelfNoMatch: -arrSelf"
"SquareArrSelfMixed: -arrSelfMixed\n"

# Nested filter composition
nestedFilterVal = (arr > 3) < 8
nestedSquareFilterVal = Square((arr > 3) < 8)

"NestedFilter: -nestedFilterVal"
"NestedSquareFilter: -nestedSquareFilterVal\n"

# Multi-argument conditional gating
a = 5
b = 7
sumBothTrue = SumSquares(a > 2, b > 3)
sumOneFalse = SumSquares(a > 2, b > 10)
sumOtherFalse = SumSquares(a > 10, b > 3)
m = 0:5
sumRangeBothTrue = SumSquares(m > 2, m < 4)
sumRangeAllFalse = SumSquares(m > 10, m < 4)
sumRangeKeepPrev = 77
sumRangeKeepPrev = SumSquares(m > 10, m < 4)
sumRangeTailFalse = SumSquares(m > 1, m < 3)

"SumSquaresBothTrue: -sumBothTrue"
"SumSquaresOneFalse: -sumOneFalse"
"SumSquaresOtherFalse: -sumOtherFalse"
"SumSquaresRangeBothTrue: -sumRangeBothTrue"
"SumSquaresRangeAllFalse: -sumRangeAllFalse"
"SumSquaresRangeKeepPrev: -sumRangeKeepPrev"
"SumSquaresRangeTailFalse: -sumRangeTailFalse"
